<launch>
    <rosparam command="load" file="$(find benchmarking_grasp)/config/configuration.yaml" />
    
    <!-- Parameters -->
    <arg name="sim_mode" default="false"/>
    <arg name="use_depth_completion" default="true"/>
    <arg name="record_video" default="false"/>
    <arg name="align_depth" default="true"/>
    <arg name="point_cloud_input" default="false"/>
    
    <!-- <rosparam>
        sim_mode: $(arg sim_mode)
        use_depth_completion: $(arg use_depth_completion)
        record_video: $(arg record_video)
        align_depth: $(arg align_depth)
        point_cloud_input: $(arg point_cloud_input)
    </rosparam> -->
    
    <include unless="$(arg sim_mode)" file="$(find pick_and_place)/launch/publish_transform.launch" />
    <include unless="$(arg sim_mode)" file="$(find realsense2_camera)/launch/rs_camera.launch">
        <arg name="align_depth" value="$(arg align_depth)"/>
        <arg name="filters" value="decimation,hole_filling"/>
        <arg name="enable_pointcloud" value="$(arg point_cloud_input)"/>
    </include>

    <node if="$(arg point_cloud_input)" pkg="benchmarking_grasp" type="apply_point_cloud_roi" name="apply_pc_roi" output="screen"/>
    <node if="$(arg use_depth_completion)" pkg="benchmarking_grasp" type="simple_depth_completion.py" name="simple_depth_completion" output="screen"/> -->
    <node pkg="benchmarking_grasp" type="test_image_to_camera_frame.py" name="image_to_camera_node" output="screen"/>
    <node pkg="benchmarking_grasp" type="test_cam_to_world_frame.py" name="camera_to_world_node" output="screen"/>
    <node pkg="benchmarking_grasp" type="test_benchmark_pipeline.py" name="benchmark_test" output="screen"/>
    <node if="$(arg record_video)" pkg="benchmarking_grasp" type="video_recorder.py" name="video_recorder" output="screen"/>
</launch>